<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>异常处理 | Bukkit Development Note α</title>
    <meta name="description" content="Bukkit Development Note Alpha is a guide about how to develope a plugin with BukkitAPI.">
    <meta name="generator" content="VuePress 1.4.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/css/0.styles.47035bf9.css" as="style"><link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/js/app.e1f3861f.js" as="script"><link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/js/2.cc6e75aa.js" as="script"><link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/js/20.c4fbb199.js" as="script"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/10.1ccdbd96.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/11.a89d6a64.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/12.d106061e.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/13.ae4e9c02.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/14.8e323878.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/15.c4c88afd.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/16.b13d0230.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/17.567cf58d.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/18.465e278e.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/19.29af88fd.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/21.7f6de141.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/22.b44f9a0c.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/23.2e5108c9.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/24.9516e2b6.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/25.dff2cf05.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/26.2b210e48.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/27.06567ebe.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/28.23479591.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/29.9fba1cdc.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/3.8f6ad4d5.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/4.2f54bf03.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/5.00152988.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/6.3893f5f8.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/7.dab76dec.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/8.ecf73e06.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/9.cd5eafec.js">
    <link rel="stylesheet" href="/BukkitDevelopmentNoteAlpha/assets/css/0.styles.47035bf9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BukkitDevelopmentNoteAlpha/" class="home-link router-link-active"><!----> <span class="site-name">Bukkit Development Note α</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/donate.html" class="nav-link">
  赞助
</a></div><div class="nav-item"><a href="https://github.com/BakaRinya/BukkitDevelopmentNoteAlpha" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/donate.html" class="nav-link">
  赞助
</a></div><div class="nav-item"><a href="https://github.com/BakaRinya/BukkitDevelopmentNoteAlpha" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/BukkitDevelopmentNoteAlpha/home.html" class="sidebar-link">欢迎</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Step1: 基本操作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNoteAlpha/step_1/0-1.html" class="sidebar-link">写在前面</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_1/1-1.html" class="sidebar-link">认识Java和面向对象</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_1/1-2.html" class="sidebar-link">编写一个插件</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_1/0-2.html" class="sidebar-link">后记</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Step2: 语言基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-1.html" class="sidebar-link">语言规则和基本操作</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-2.html" class="sidebar-link">类和方法的创建</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-3.html" class="sidebar-link">初识数据</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-4.html" class="sidebar-link">关键字、类与方法深入</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-5.html" class="sidebar-link">流程控制结构</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-6.html" class="sidebar-link">常见数据类型</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-7.html" class="active sidebar-link">异常处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNoteAlpha/step_2/1-7.html#try-catch块" class="sidebar-link">try-catch块</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNoteAlpha/step_2/1-7.html#抛出错误" class="sidebar-link">抛出错误</a></li><li class="sidebar-sub-header"><a href="/BukkitDevelopmentNoteAlpha/step_2/1-7.html#error" class="sidebar-link">Error</a></li></ul></li><li><a href="/BukkitDevelopmentNoteAlpha/step_2/1-8.html" class="sidebar-link">线程</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Step3: 开发插件</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="异常处理"><a href="#异常处理" class="header-anchor">#</a> 异常处理</h1> <h2 id="try-catch块"><a href="#try-catch块" class="header-anchor">#</a> try-catch块</h2> <p>现在我们从玩家那里得到了他们输入的数字a和b. 现在我们算一算a除以b是多少.</p> <p>但是有个问题, 玩家会不会恶作剧把b输入一个0进来呢? 这样会报错.<br>
也许你会说, 用if判断一下a和b是不是在某个取值范围内就可以了. 对, 就应该是这样, 大家都是这样干的.</p> <p>这里想告诉你的是, 在你能大概预感到某个代码会报错时, 你可以用try-catch来捕获它.<br>
我们假设我们能预判出来<code>double c=a/b;</code>这句代码会报错, 还不用if的话.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">// double c = a/b; 这样肯定是报错的</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">//把你认为要报错的代码套在这里</span>
    <span class="token keyword">double</span> c <span class="token operator">=</span> a<span class="token operator">/</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token comment">//这里的Exception应该精确到具体的错误类型</span>
    <span class="token comment">//因为想捕获所有的错误, 所以写了Exception</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;报错了!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//输出报错信息</span>
<span class="token punctuation">}</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你可以试试看, 如果没有try-catch, 该方法的某句代码报错后会立刻停止运行该方法, 而try-catch中报错的话会绕过这块内容, 继续输出下面的<code>hi!</code>.</p> <p>try-catch捕获的实际上是<code>Exception</code>对象. 有很多种<code>Exception</code>对象.</p> <p><strong>在实际开发中, 没有必要把所有的代码都套上try-catch, 那样没什么用. 只需要套上你认为会报错的代码即可.</strong></p> <h2 id="抛出错误"><a href="#抛出错误" class="header-anchor">#</a> 抛出错误</h2> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//这是我们自己写的方法</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;只要执行我, 我就会报错&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>利用throw语句, 我们的<code>a</code>方法只要被调用, 它就会抛出错误.<br>
由此可见, throw可以抛出一个Exception对象.</p> <p>你也可以定义一个自己的类, 继承自<code>Exception</code>, 来抛出自己的<code>Exception</code>对象.</p> <h2 id="error"><a href="#error" class="header-anchor">#</a> Error</h2> <p><code>Exception</code>是可以被捕获的, 但是<code>Error</code>是不可以被捕获的.<br>
JVM错误, 例如内存不足、崩溃等影响程序继续运行的问题, JVM会抛出一个Error.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/BukkitDevelopmentNoteAlpha/step_2/1-6.html" class="prev">
        常见数据类型
      </a></span> <span class="next"><a href="/BukkitDevelopmentNoteAlpha/step_2/1-8.html">
        线程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/BukkitDevelopmentNoteAlpha/assets/js/app.e1f3861f.js" defer></script><script src="/BukkitDevelopmentNoteAlpha/assets/js/2.cc6e75aa.js" defer></script><script src="/BukkitDevelopmentNoteAlpha/assets/js/20.c4fbb199.js" defer></script>
  </body>
</html>
