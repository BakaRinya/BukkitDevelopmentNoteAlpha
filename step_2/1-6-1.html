<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>引用内容存档 | Bukkit Development Note α</title>
    <meta name="description" content="Bukkit Development Note Alpha is a guide about how to develope a plugin with BukkitAPI.">
    <meta name="generator" content="VuePress 1.4.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.2/jquery.fancybox.min.css">
    
    <link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/css/0.styles.47035bf9.css" as="style"><link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/js/app.e1f3861f.js" as="script"><link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/js/2.cc6e75aa.js" as="script"><link rel="preload" href="/BukkitDevelopmentNoteAlpha/assets/js/18.465e278e.js" as="script"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/10.1ccdbd96.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/11.a89d6a64.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/12.d106061e.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/13.ae4e9c02.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/14.8e323878.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/15.c4c88afd.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/16.b13d0230.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/17.567cf58d.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/19.29af88fd.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/20.c4fbb199.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/21.7f6de141.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/22.b44f9a0c.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/23.2e5108c9.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/24.9516e2b6.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/25.dff2cf05.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/26.2b210e48.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/27.06567ebe.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/28.23479591.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/29.9fba1cdc.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/3.8f6ad4d5.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/4.2f54bf03.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/5.00152988.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/6.3893f5f8.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/7.dab76dec.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/8.ecf73e06.js"><link rel="prefetch" href="/BukkitDevelopmentNoteAlpha/assets/js/9.cd5eafec.js">
    <link rel="stylesheet" href="/BukkitDevelopmentNoteAlpha/assets/css/0.styles.47035bf9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/BukkitDevelopmentNoteAlpha/" class="home-link router-link-active"><!----> <span class="site-name">Bukkit Development Note α</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/donate.html" class="nav-link">
  赞助
</a></div><div class="nav-item"><a href="https://github.com/BakaRinya/BukkitDevelopmentNoteAlpha" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/home.html" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/contribute.html" class="nav-link">
  贡献
</a></div><div class="nav-item"><a href="/BukkitDevelopmentNoteAlpha/donate.html" class="nav-link">
  赞助
</a></div><div class="nav-item"><a href="https://github.com/BakaRinya/BukkitDevelopmentNoteAlpha" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub仓库
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/BukkitDevelopmentNoteAlpha/home.html" class="sidebar-link">欢迎</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Step1: 基本操作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/BukkitDevelopmentNoteAlpha/step_1/0-1.html" class="sidebar-link">写在前面</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_1/1-1.html" class="sidebar-link">认识Java和面向对象</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_1/1-2.html" class="sidebar-link">编写一个插件</a></li><li><a href="/BukkitDevelopmentNoteAlpha/step_1/0-2.html" class="sidebar-link">后记</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Step2: 语言基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Step3: 开发插件</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="引用内容存档"><a href="#引用内容存档" class="header-anchor">#</a> 引用内容存档</h1> <h2 id="_1"><a href="#_1" class="header-anchor">#</a> 1</h2> <p>代码：</p> <div class="language-java extra-class"><pre class="language-java"><code>        <span class="token comment">// 浮点数的打印</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;10000000000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 普通的数字字符串</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;100.000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 去除末尾多余的0</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;100.000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stripTrailingZeros</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 避免输出科学计数法</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token string">&quot;100.000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stripTrailingZeros</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toPlainString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>输出结果：</p> <div class="language- extra-class"><pre class="language-text"><code>10000000000
100.000
1E+2
100
</code></pre></div><h2 id="_2"><a href="#_2" class="header-anchor">#</a> 2</h2> <p>前阵子做题遇到了大数的精确计算，再次认识了bigdecimal
关于Bigdecimal意外的有许多小知识点和坑，这里特此整理一下为方便以后学习，希望能帮助到其他的萌新</p> <p>BigDecimal的运算——加减乘除
首先是bigdecimal的初始化
这里对比了两种形式，第一种直接value写数字的值，第二种用string来表示</p> <div class="language- extra-class"><pre><code>    BigDecimal num1 = new BigDecimal(0.005);
    BigDecimal num2 = new BigDecimal(1000000);
    BigDecimal num3 = new BigDecimal(-1000000);
    //尽量用字符串的形式初始化
    BigDecimal num12 = new BigDecimal(&quot;0.005&quot;);
    BigDecimal num22 = new BigDecimal(&quot;1000000&quot;);
    BigDecimal num32 = new BigDecimal(&quot;-1000000&quot;);
</code></pre></div><p>我们对其进行加减乘除绝对值的运算</p> <p>其实就是Bigdecimal的类的一些调用</p> <p>加法 add()函数     减法subtract()函数
乘法multiply()函数    除法divide()函数    绝对值abs()函数
我这里承接上面初始化Bigdecimal分别用string和数进行运算对比</p> <div class="language- extra-class"><pre><code>    //加法
    BigDecimal result1 = num1.add(num2);
    BigDecimal result12 = num12.add(num22);

    //减法
    BigDecimal result2 = num1.subtract(num2);
    BigDecimal result22 = num12.subtract(num22);

    //乘法
    BigDecimal result3 = num1.multiply(num2);
    BigDecimal result32 = num12.multiply(num22);

    //绝对值
    BigDecimal result4 = num3.abs();
    BigDecimal result42 = num32.abs();

    //除法
    BigDecimal result5 = num2.divide(num1,20,BigDecimal.ROUND_HALF_UP);
    BigDecimal result52 = num22.divide(num12,20,BigDecimal.ROUND_HALF_UP);
</code></pre></div><p>我把result全部输出可以看到结果</p> <p>这里出现了差异，这也是为什么初始化建议使用string的原因</p> <p>※ 注意：
1）System.out.println()中的数字默认是double类型的，double类型小数计算不精准。</p> <p>2）使用BigDecimal类构造方法传入double类型时，计算的结果也是不精确的！</p> <p>因为不是所有的浮点数都能够被精确的表示成一个double 类型值，有些浮点数值不能够被精确的表示成 double 类型值，因此它会被表示成与它最接近的 double 类型的值。必须改用传入String的构造方法。这一点在BigDecimal类的构造方法注释中有说明。</p> <p>完整的test代码如下：</p> <p>import java.math.BigDecimal;
import java.util.Scanner;</p> <p>public class TestThree {</p> <div class="language- extra-class"><pre><code>public static void main(String[] args) {

    BigDecimal num1 = new BigDecimal(0.005);
    BigDecimal num2 = new BigDecimal(1000000);
    BigDecimal num3 = new BigDecimal(-1000000);
    //尽量用字符串的形式初始化
    BigDecimal num12 = new BigDecimal(&quot;0.005&quot;);
    BigDecimal num22 = new BigDecimal(&quot;1000000&quot;);
    BigDecimal num32 = new BigDecimal(&quot;-1000000&quot;);

    //加法
    BigDecimal result1 = num1.add(num2);
    BigDecimal result12 = num12.add(num22);
    //减法
    BigDecimal result2 = num1.subtract(num2);
    BigDecimal result22 = num12.subtract(num22);
    //乘法
    BigDecimal result3 = num1.multiply(num2);
    BigDecimal result32 = num12.multiply(num22);
    //绝对值
    BigDecimal result4 = num3.abs();
    BigDecimal result42 = num32.abs();
    //除法
    BigDecimal result5 = num2.divide(num1,20,BigDecimal.ROUND_HALF_UP);
    BigDecimal result52 = num22.divide(num12,20,BigDecimal.ROUND_HALF_UP);

    System.out.println(&quot;加法用value结果：&quot;+result1);
    System.out.println(&quot;加法用string结果：&quot;+result12);

    System.out.println(&quot;减法value结果：&quot;+result2);
    System.out.println(&quot;减法用string结果：&quot;+result22);

    System.out.println(&quot;乘法用value结果：&quot;+result3);
    System.out.println(&quot;乘法用string结果：&quot;+result32);

    System.out.println(&quot;绝对值用value结果：&quot;+result4);
    System.out.println(&quot;绝对值用string结果：&quot;+result42);

    System.out.println(&quot;除法用value结果：&quot;+result5);
    System.out.println(&quot;除法用string结果：&quot;+result52);
}
</code></pre></div><p>}
除法divide()参数使用
使用除法函数在divide的时候要设置各种参数，要精确的小数位数和舍入模式，不然会出现报错</p> <p>我们可以看到divide函数配置的参数如下</p> <p>即为 （BigDecimal divisor 除数， int scale 精确小数位，  int roundingMode 舍入模式）
可以看到舍入模式有很多种BigDecimal.ROUND_XXXX_XXX, 具体都是什么意思呢</p> <p>计算1÷3的结果（最后一种ROUND_UNNECESSARY在结果为无限小数的情况下会报错）</p> <p>八种舍入模式解释如下
1、ROUND_UP</p> <p>舍入远离零的舍入模式。</p> <p>在丢弃非零部分之前始终增加数字(始终对非零舍弃部分前面的数字加1)。</p> <p>注意，此舍入模式始终不会减少计算值的大小。</p> <p>2、ROUND_DOWN</p> <p>接近零的舍入模式。</p> <p>在丢弃某部分之前始终不增加数字(从不对舍弃部分前面的数字加1，即截短)。</p> <p>注意，此舍入模式始终不会增加计算值的大小。</p> <p>3、ROUND_CEILING</p> <p>接近正无穷大的舍入模式。</p> <p>如果 BigDecimal 为正，则舍入行为与 ROUND_UP 相同;</p> <p>如果为负，则舍入行为与 ROUND_DOWN 相同。</p> <p>注意，此舍入模式始终不会减少计算值。</p> <p>4、ROUND_FLOOR</p> <p>接近负无穷大的舍入模式。</p> <p>如果 BigDecimal 为正，则舍入行为与 ROUND_DOWN 相同;</p> <p>如果为负，则舍入行为与 ROUND_UP 相同。</p> <p>注意，此舍入模式始终不会增加计算值。</p> <p>5、ROUND_HALF_UP</p> <p>向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为向上舍入的舍入模式。</p> <p>如果舍弃部分 &gt;= 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同。</p> <p>注意，这是我们大多数人在小学时就学过的舍入模式(四舍五入)。</p> <p>6、ROUND_HALF_DOWN</p> <p>向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则为上舍入的舍入模式。</p> <p>如果舍弃部分 &gt; 0.5，则舍入行为与 ROUND_UP 相同;否则舍入行为与 ROUND_DOWN 相同(五舍六入)。</p> <p>7、ROUND_HALF_EVEN</p> <p>向“最接近的”数字舍入，如果与两个相邻数字的距离相等，则向相邻的偶数舍入。</p> <p>如果舍弃部分左边的数字为奇数，则舍入行为与 ROUND_HALF_UP 相同;</p> <p>如果为偶数，则舍入行为与 ROUND_HALF_DOWN 相同。</p> <p>注意，在重复进行一系列计算时，此舍入模式可以将累加错误减到最小。</p> <p>此舍入模式也称为“银行家舍入法”，主要在美国使用。四舍六入，五分两种情况。</p> <p>如果前一位为奇数，则入位，否则舍去。</p> <p>以下例子为保留小数点1位，那么这种舍入方式下的结果。</p> <p>1.15&gt;1.2 1.25&gt;1.2</p> <p>8、ROUND_UNNECESSARY</p> <p>断言请求的操作具有精确的结果，因此不需要舍入。</p> <p>如果对获得精确结果的操作指定此舍入模式，则抛出ArithmeticException。</p> <p>http://www.bdqn.cn/news/201311/11834.shtml
————————————————
版权声明：本文为CSDN博主「haiyinshushe」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/haiyinshushe/java/article/details/82721234</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/BukkitDevelopmentNoteAlpha/assets/js/app.e1f3861f.js" defer></script><script src="/BukkitDevelopmentNoteAlpha/assets/js/2.cc6e75aa.js" defer></script><script src="/BukkitDevelopmentNoteAlpha/assets/js/18.465e278e.js" defer></script>
  </body>
</html>
