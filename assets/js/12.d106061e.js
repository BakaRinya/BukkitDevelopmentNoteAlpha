(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{255:function(t,a,s){"use strict";s.r(a);var e=s(28),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"编写一个插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编写一个插件"}},[t._v("#")]),t._v(" 编写一个插件")]),t._v(" "),s("h2",{attrs:{id:"环境搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境搭建"}},[t._v("#")]),t._v(" 环境搭建")]),t._v(" "),s("h3",{attrs:{id:"配置jdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置jdk"}},[t._v("#")]),t._v(" 配置JDK")]),t._v(" "),s("p",[t._v("首先我们需要下载对应版本的JDK. JDK是区分操作系统位数的, 请下载你电脑应该使用的JDK."),s("br"),t._v("\n本教程使用的是Java8, 编者使用的是64位windows操作系统, 因此下载了windows 64位版本的JDK8.")]),t._v(" "),s("p",[t._v("你可以在网上找到 JDK8 的安装包, 下面是官方下载地址(下载时需要登录账号并且国内速度慢):"),s("br"),t._v(" "),s("a",{attrs:{href:"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("下载完毕后, 右键用管理员模式打开(XP直接双击), 进行安装.")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://miao.su/images/2018/07/31/p4a4d3c.png",rel:"external nofollow"}},[s("img",{attrs:{src:"https://miao.su/images/2018/07/31/p4a4d3c.png",alt:""}})])]),t._v(" "),s("p",[t._v("安装路径不能有中文(全英文), 安装过程中填写的两个安装地址, 都应该记住, 以免后续需要使用.")]),t._v(" "),s("h3",{attrs:{id:"配置ide-eclipse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置ide-eclipse"}},[t._v("#")]),t._v(" 配置IDE(Eclipse)")]),t._v(" "),s("p",[t._v("IDE为我们提供了方便的Java开发工具等, 我们可以在IDE里轻松完成开发. 本教程后续将以一款比较出名的IDE——Eclipse做示范."),s("br"),t._v("\n你也可以使用别的IDE, 例如IDEA.")]),t._v(" "),s("p",[t._v("打开下面的链接:\n"),s("a",{attrs:{href:"http://www.eclipse.org/downloads/packages/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.eclipse.org/downloads/packages/"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://miao.su/images/2018/07/31/p3c1c5b.png",rel:"external nofollow"}},[s("img",{attrs:{src:"https://miao.su/images/2018/07/31/p3c1c5b.png",alt:""}})])]),t._v(" "),s("p",[t._v("下载完毕后, 双击打开, 解压缩出来.")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://miao.su/images/2018/07/31/p5e12c6.png",rel:"external nofollow"}},[s("img",{attrs:{src:"https://miao.su/images/2018/07/31/p5e12c6.png",alt:""}})])]),t._v(" "),s("p",[t._v("解压缩完毕后, 即可双击"),s("code",[t._v("eclipse.exe")]),t._v("文件打开Eclipse."),s("br"),t._v("\n在接下来的内容中, 将使用Eclipse作为IDE进行开发.")]),t._v(" "),s("blockquote",[s("p",[t._v("经常有人在这里遇到Eclipse打不开的问题."),s("br"),t._v("\n请自行修改"),s("code",[t._v("eclipse.ini")]),t._v("文件."),s("br"),t._v("\n参考"),s("a",{attrs:{href:"https://blog.csdn.net/gnail_oug/article/details/51925804",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/gnail_oug/article/details/51925804"),s("OutboundLink")],1)])]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://miao.su/images/2018/07/31/p6c53ce.png",rel:"external nofollow"}},[s("img",{attrs:{src:"https://miao.su/images/2018/07/31/p6c53ce.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"准备开服jar文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备开服jar文件"}},[t._v("#")]),t._v(" 准备开服jar文件")]),t._v(" "),s("p",[t._v("Spigot、Paper等服务端本质上就是Bukkit的衍生服务端."),s("br"),t._v("\n最开始诞生的是Bukkit服务端, 后续因为法律问题被迫中止, Bukkit服务端提供的API目前正在被SpigotMC维护. 目前大部分的服务端都基于Spigot开发."),s("br"),t._v(" "),s("strong",[t._v("由此而看, 基于BukkitAPI的插件并不是只有Bukkit才能用, 其衍生出的Spigot等诸多衍生服务端应该都能用.")])]),t._v(" "),s("p",[t._v("我们开服使用的服务端jar文件, 写插件时同样也需要用到."),s("br"),t._v("\n写插件之前我们需要下载一个开服所用的jar文件."),s("br"),t._v("\n绝大多数情况下准备Spigot或者Paper, 亦或是其他服务端其实都是一样的.")]),t._v(" "),s("p",[t._v("您可以在这里下载到常用的服务端jar文件."),s("br"),t._v("\nSpigot: "),s("a",{attrs:{href:"https://getbukkit.org/download/spigot",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://getbukkit.org/download/spigot"),s("OutboundLink")],1),s("br"),t._v("\nPaper: "),s("a",{attrs:{href:"https://yivesmirror.com/downloads/paper",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://yivesmirror.com/downloads/paper"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("特别注意")]),s("br"),t._v("\n有一种远古的服务端叫做MCPC, 其与其后续衍生出的MCPC+和Cauldron服务端与Bukkit、Spigot等服务端架构并不一样.")]),t._v(" "),s("p",[t._v("开发普通的插件时, 这些服务端的插件开发工作应该基于Spigot开发更合适. 如果插件涉及到MOD开发应当相提并论.")]),t._v(" "),s("p",[t._v("但要注意, 请时刻牢记不断调试. 有些你认为理所应当的事情会在这种服务端上出BUG."),s("br"),t._v("\n本教程后续将不再为这类服务端做特殊说明.")]),t._v(" "),s("p",[s("em",[t._v("这段文字说明不针对CatServer等新生MOD+插件形式的服务端.")])])]),t._v(" "),s("h2",{attrs:{id:"写最简单的插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写最简单的插件"}},[t._v("#")]),t._v(" 写最简单的插件")]),t._v(" "),s("p",[s("strong",[t._v("下面的内容如果有不明白的地方可以先照做, 在后面的内容中找到答案.")]),s("br"),t._v(" "),s("strong",[t._v("请你在下面的内容中重点注意熟悉Eclipse的使用方式.")])]),t._v(" "),s("p",[t._v("打开Eclipse.")]),t._v(" "),s("h3",{attrs:{id:"创建工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建工程"}},[t._v("#")]),t._v(" 创建工程")]),t._v(" "),s("p",[t._v("第一步, 先为你的插件新建一个工程(Project).")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://i.loli.net/2020/03/29/VobfqLu4Gi1Op8U.jpg",rel:"external nofollow"}},[s("img",{attrs:{src:"https://i.loli.net/2020/03/29/VobfqLu4Gi1Op8U.jpg",alt:""}})])]),t._v(" "),s("p",[t._v("第二步, 导入开服用的jar文件.")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://i.loli.net/2020/03/29/3pc2KfeiTZ49OYo.jpg",rel:"external nofollow"}},[s("img",{attrs:{src:"https://i.loli.net/2020/03/29/3pc2KfeiTZ49OYo.jpg",alt:""}})])]),t._v(" "),s("p",[t._v("至此, 你已经创建完毕用以开发插件的工程.")]),t._v(" "),s("h3",{attrs:{id:"创建主类和plugin-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建主类和plugin-yml"}},[t._v("#")]),t._v(" 创建主类和"),s("code",[t._v("plugin.yml")])]),t._v(" "),s("p",[s("strong",[t._v("一个插件必须要有的两样东西, 一个是主类, 一个是"),s("code",[t._v("plugin.yml")]),t._v("文件.")])]),t._v(" "),s("p",[t._v("让我们先创建一个主类.")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://i.loli.net/2020/04/03/gQb9q1XT3PhINEC.jpg",rel:"external nofollow"}},[s("img",{attrs:{src:"https://i.loli.net/2020/04/03/gQb9q1XT3PhINEC.jpg",alt:""}})])]),t._v(" "),s("p",[t._v("注意: 其实主类名、类名并没有严格的规定. 具体的命名规则、这些步骤是什么意思, 会在稍后详细地告诉你.")]),t._v(" "),s("p",[t._v("再创建"),s("code",[t._v("plugin.yml")]),t._v("文件.")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://i.loli.net/2020/04/03/RreDuqoFT2UCajN.jpg",rel:"external nofollow"}},[s("img",{attrs:{src:"https://i.loli.net/2020/04/03/RreDuqoFT2UCajN.jpg",alt:""}})])]),t._v(" "),s("blockquote",[s("p",[t._v("可能你的Eclipse会弹出"),s("code",[t._v("Editor avaiable on the Marketplace")]),t._v("的提示, 选择第二项("),s("code",[t._v("Associate '*.yml' files")]),t._v("开头) 点"),s("code",[t._v("OK")]),t._v("即可."),s("br"),t._v("\n你的电脑上应该还要安装一款文本编辑器. 推荐"),s("code",[t._v("Sublime Text")]),t._v("或"),s("code",[t._v("Visual Studio Code")]),t._v("(本文使用).")])]),t._v(" "),s("p",[t._v("创建完毕会自动打开"),s("code",[t._v("plugin.yml")]),t._v("文件."),s("br"),t._v("\n在"),s("code",[t._v("plugin.yml")]),t._v("文件中输入这些内容:")]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" HelloWorldPlugin\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" rinya.bukkit.helloworldplugin.HelloWorldPluginMain\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("author")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" BakaRinya\n")])])]),s("p",[t._v("注意:")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("yml")]),t._v("文件中冒号都应该是英文冒号, 后面必须有一个空格.")]),t._v(" "),s("li",[s("code",[t._v("plugin.yml")]),t._v("中忌讳出现中文, 应当保证尽可能全英文.")]),t._v(" "),s("li",[t._v("上面从上到下依次是: 插件名、主类、版本号(可以写1.0.0之类的)、作者名.")])]),t._v(" "),s("p",[t._v("保存. 保存之后双击"),s("code",[t._v("src")]),t._v("中我们创建的"),s("code",[t._v("HelloWorldPluginMain.java")]),t._v("文件, 在Eclipse中打开, 我们把其中内容改为这样:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("rinya"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bukkit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("helloworldplugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bukkit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("java")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JavaPlugin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HelloWorldPluginMain")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JavaPlugin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onEnable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello World!"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("应该看起来是这样:")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://i.loli.net/2020/04/03/Qx4wGRc2B8fgieN.jpg",rel:"external nofollow"}},[s("img",{attrs:{src:"https://i.loli.net/2020/04/03/Qx4wGRc2B8fgieN.jpg",alt:"24.jpg"}})])]),t._v(" "),s("p",[t._v("至此, 你已经将该插件开发完毕. 接下来只需要导出即可.")]),t._v(" "),s("h3",{attrs:{id:"导出插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#导出插件"}},[t._v("#")]),t._v(" 导出插件")]),t._v(" "),s("p",[t._v("下面我们导出这个插件, 来看看效果.")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://i.loli.net/2020/04/03/6PYDqsvkRwWeuhn.jpg",rel:"external nofollow"}},[s("img",{attrs:{src:"https://i.loli.net/2020/04/03/6PYDqsvkRwWeuhn.jpg",alt:"25.jpg"}})])]),t._v(" "),s("p",[t._v("之后你将会在你填写的位置找到插件的"),s("code",[t._v("jar")]),t._v("文件. 你可以将你的插件放入服务端中, 像一个普通的插件一样安装它, 打开服务端."),s("br"),t._v(" "),s("strong",[t._v("注: 除非你想做插件之间的兼容测试, 一般测试插件用的服务端只安装我们正在开发的插件.")])]),t._v(" "),s("p",[t._v("启动服务端后, 你会看到这些信息:")]),t._v(" "),s("p",[s("a",{attrs:{"data-fancybox":"",href:"https://i.loli.net/2020/04/03/t9lk7ODdoGPbvjy.jpg",rel:"external nofollow"}},[s("img",{attrs:{src:"https://i.loli.net/2020/04/03/t9lk7ODdoGPbvjy.jpg",alt:"26.jpg"}})])]),t._v(" "),s("p",[t._v("你会发现插件被加载后, 输出了"),s("code",[t._v("Hello World!")]),t._v(". 这说明我们的插件运行正常, 十分完美."),s("br"),t._v("\n局限于水平, 目前我们的插件仅此一项功能. 之后我们将不断完善它.")])])}),[],!1,null,null,null);a.default=n.exports}}]);